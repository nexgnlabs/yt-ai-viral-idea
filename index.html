<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI YouTube Thumbnail Studio</title>
    <script src="https://js.puter.com/v2/"></script>
    <style>
        :root { --yt-red: #ff0000; --bg: #0f0f0f; --card: #1e1e1e; --text: #ffffff; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; padding: 40px; }
        .app-container { width: 100%; max-width: 600px; background: var(--card); padding: 30px; border-radius: 15px; border: 1px solid #333; }
        h2 { text-align: center; color: var(--yt-red); margin-top: 0; }
        .input-group { margin-bottom: 20px; }
        input { width: 100%; padding: 12px; background: #000; border: 1px solid #444; border-radius: 8px; color: white; box-sizing: border-box; margin-top: 8px; }
        .btn { width: 100%; padding: 15px; background: var(--yt-red); border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn:hover { opacity: 0.8; transform: scale(0.98); }
        .btn:disabled { background: #555; cursor: not-allowed; }
        #preview-area { margin-top: 25px; min-height: 300px; border: 2px dashed #444; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        #preview-area img { width: 100%; height: auto; display: block; }
        #loader { display: none; color: #00d4ff; font-weight: bold; }
    </style>
</head>
<body>

<div class="app-container">
    <h2>Thumbnail Studio</h2>
    
    <div class="input-group">
        <label>What is your video about?</label>
        <input type="text" id="videoTopic" placeholder="e.g. Solving a mystery in a dark forest">
    </div>

    <button class="btn" id="genBtn" onclick="generateThumbnail()">GENERATE THUMBNAIL</button>

    <div id="preview-area">
        <div id="loader">âš¡ RENDERING 2025 AI VISUALS...</div>
    </div>
</div>

<script>
async function generateThumbnail() {
    const topic = document.getElementById('videoTopic').value;
    const btn = document.getElementById('genBtn');
    const loader = document.getElementById('loader');
    const preview = document.getElementById('preview-area');

    if (!topic) return alert("Please enter a topic!");

    // UI Updates
    btn.disabled = true;
    loader.style.display = 'block';
    
    // Clear old image but keep loader
    const existingImg = preview.querySelector('img');
    if(existingImg) existingImg.remove();

    // PROMPT ENGINEERING: 
    // We wrap the user's topic in "Thumbnail Psychology" keywords
    const masterPrompt = `Professional YouTube thumbnail, high-quality photography, 
    subject: ${topic}, vivid colors, high contrast, dramatic cinematic lighting, 
    blurred background for depth, sharp focus on center, 8k resolution, 
    extremely detailed, eye-catching composition.`;

    try {
        // We attempt the high-end Gemini 3 model first
        const imageElement = await puter.ai.txt2img(masterPrompt, { 
            model: "gemini-3-pro-image-preview" 
        });
        
        preview.appendChild(imageElement);
    } catch (error) {
        console.warn("Gemini 3 Busy, using Stable Fallback...");
        try {
            // Fallback for better reliability
            const fallbackImg = await puter.ai.txt2img(masterPrompt, { 
                model: "gpt-image-1.5" 
            });
            preview.appendChild(fallbackImg);
        } catch (err2) {
            preview.innerHTML = `<p style="color:red">Error: AI engines overloaded. Try again in 30s.</p>`;
        }
    } finally {
        btn.disabled = false;
        loader.style.display = 'none';
    }
}
</script>

</body>
</html>
